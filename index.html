<!DOCTYPE html>
<html lang="en" data-theme="titan">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LAKSHX TITAN | OS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@200;400;600;800&family=JetBrains+Mono:wght@300;500&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            --bg: #030712;
            --accent: #6366f1;
            --accent-glow: rgba(99, 102, 241, 0.3);
            --panel: rgba(15, 23, 42, 0.7);
            --text: #f8fafc;
        }

        [data-theme="cyberpunk"] {
            --bg: #0f0524;
            --accent: #f43f5e;
            --accent-glow: rgba(244, 63, 94, 0.3);
            --panel: rgba(20, 10, 30, 0.7);
        }

        [data-theme="forest"] {
            --bg: #051510;
            --accent: #10b981;
            --accent-glow: rgba(16, 185, 129, 0.3);
            --panel: rgba(10, 25, 20, 0.7);
        }

        [data-theme="deepsea"] {
            --bg: #021024;
            --accent: #0ea5e9;
            --accent-glow: rgba(14, 165, 233, 0.3);
            --panel: rgba(5, 20, 40, 0.7);
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
            height: 100vh;
        }

        .glass {
            background: var(--panel);
            backdrop-filter: blur(24px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .accent-text { color: var(--accent); text-shadow: 0 0 15px var(--accent-glow); }
        .accent-bg { background-color: var(--accent); }
        .accent-border { border-color: var(--accent); }

        /* Smooth tab transitions */
        .page-enter { animation: slideUp 0.4s ease-out forwards; }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .orb {
            position: absolute;
            filter: blur(100px);
            z-index: -1;
            opacity: 0.4;
            transition: all 1s ease;
        }

        /* Custom Scrollbar */
        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: var(--accent); border-radius: 10px; }

        .nav-item.active {
            background: linear-gradient(90deg, var(--accent-glow) 0%, transparent 100%);
            border-left: 4px solid var(--accent);
            color: white;
        }

        @media (max-width: 768px) {
            .sidebar { height: 70px; width: 100%; bottom: 0; top: auto; flex-direction: row; border-top: 1px solid rgba(255,255,255,0.1); border-right: none; }
            .content-area { padding-bottom: 80px; }
            .desktop-only { display: none; }
        }
    </style>
</head>
<body class="flex flex-col md:flex-row">

    <!-- Ambient Orbs -->
    <div id="orb-1" class="orb w-[500px] h-[500px] accent-bg top-[-10%] left-[-10%]"></div>
    <div id="orb-2" class="orb w-[400px] h-[400px] bg-purple-600/30 bottom-[-5%] right-[-5%]"></div>

    <!-- Sidebar / Mobile Bottom Nav -->
    <aside class="sidebar glass w-72 h-full z-50 flex flex-col transition-all duration-300">
        <div class="p-6 desktop-only">
            <div class="flex items-center gap-3 mb-8">
                <div class="w-10 h-10 accent-bg rounded-xl flex items-center justify-center shadow-lg">
                    <i data-lucide="shield-check" class="text-white"></i>
                </div>
                <h1 class="font-extrabold text-xl tracking-tighter">LAKSHX <span class="accent-text">TITAN</span></h1>
            </div>
        </div>

        <nav class="flex-1 flex md:flex-col px-2 md:px-4 py-2 gap-1 justify-around md:justify-start">
            <button onclick="switchTab('dashboard')" id="nav-dashboard" class="nav-item active flex flex-col md:flex-row items-center p-3 md:p-4 rounded-xl gap-4 transition-all hover:bg-white/5">
                <i data-lucide="layout-grid"></i> <span class="text-[10px] md:text-sm font-semibold">Core</span>
            </button>
            <button onclick="switchTab('focus')" id="nav-focus" class="nav-item flex flex-col md:flex-row items-center p-3 md:p-4 rounded-xl gap-4 transition-all hover:bg-white/5">
                <i data-lucide="zap"></i> <span class="text-[10px] md:text-sm font-semibold">Focus</span>
            </button>
            <button onclick="switchTab('tasks')" id="nav-tasks" class="nav-item flex flex-col md:flex-row items-center p-3 md:p-4 rounded-xl gap-4 transition-all hover:bg-white/5">
                <i data-lucide="list-checks"></i> <span class="text-[10px] md:text-sm font-semibold">Goals</span>
            </button>
            <button onclick="switchTab('lab')" id="nav-lab" class="nav-item flex flex-col md:flex-row items-center p-3 md:p-4 rounded-xl gap-4 transition-all hover:bg-white/5">
                <i data-lucide="microscope"></i> <span class="text-[10px] md:text-sm font-semibold">Lab</span>
            </button>
        </nav>

        <div class="p-4 desktop-only">
            <div class="glass rounded-2xl p-4 border-white/5">
                <p class="text-[10px] font-bold opacity-50 uppercase tracking-[0.2em] mb-3">System Style</p>
                <div class="grid grid-cols-4 gap-2">
                    <button onclick="setTheme('titan')" class="w-6 h-6 rounded-full bg-indigo-600 border border-white/20"></button>
                    <button onclick="setTheme('cyberpunk')" class="w-6 h-6 rounded-full bg-rose-500 border border-white/20"></button>
                    <button onclick="setTheme('forest')" class="w-6 h-6 rounded-full bg-emerald-500 border border-white/20"></button>
                    <button onclick="setTheme('deepsea')" class="w-6 h-6 rounded-full bg-cyan-500 border border-white/20"></button>
                </div>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col relative overflow-hidden h-full content-area">
        <!-- Top Bar -->
        <header class="h-20 flex items-center justify-between px-6 md:px-12 border-b border-white/5 z-40">
            <div class="flex flex-col">
                <span id="header-date" class="text-xs font-bold opacity-50 uppercase tracking-widest">--</span>
                <span id="header-status" class="text-[10px] accent-text font-bold">SYSTEM ONLINE</span>
            </div>
            <div class="flex items-center gap-4">
                <div id="weather-widget" class="hidden md:flex items-center gap-2 glass px-4 py-2 rounded-full text-xs font-medium">
                    <i data-lucide="cloud-lightning" class="w-4 h-4"></i>
                    <span>24°C TITAN BASE</span>
                </div>
                <button onclick="toggleAmbient()" id="ambient-btn" class="p-3 rounded-xl hover:bg-white/5 transition-all text-slate-400">
                    <i data-lucide="waves"></i>
                </button>
            </div>
        </header>

        <div id="view-container" class="flex-1 overflow-y-auto p-6 md:p-12 custom-scroll">
            <!-- Dynamic Content -->
        </div>
    </main>

    <script>
        // --- State Management ---
        let state = {
            activeTab: 'dashboard',
            theme: 'titan',
            tasks: JSON.parse(localStorage.getItem('lakshx-tasks') || '[]'),
            pomodoro: { time: 1500, status: 'idle', mode: 'work', interval: null },
            stopwatch: { time: 0, status: 'idle', interval: null, laps: [] },
            ambient: false,
            audio: null
        };

        const API_KEY = ""; // User to insert their key

        // --- Core Navigation ---
        function switchTab(tabId) {
            state.activeTab = tabId;
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            document.getElementById(`nav-${tabId}`).classList.add('active');
            render();
        }

        function setTheme(t) {
            document.documentElement.setAttribute('data-theme', t);
            state.theme = t;
            lucide.createIcons();
        }

        // --- Clock Engine ---
        function updateGlobalClock() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('en-US', { hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit' });
            const dateStr = now.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });
            
            if (document.getElementById('main-clock')) {
                document.getElementById('main-clock').innerText = timeStr;
            }
            document.getElementById('header-date').innerText = dateStr;
        }
        setInterval(updateGlobalClock, 1000);

        // --- Templates ---
        function render() {
            const container = document.getElementById('view-container');
            container.className = "flex-1 overflow-y-auto p-6 md:p-12 custom-scroll page-enter";
            
            if (state.activeTab === 'dashboard') {
                container.innerHTML = `
                    <div class="flex flex-col items-center justify-center min-h-[60vh] text-center">
                        <div class="mb-12">
                            <h1 id="main-clock" class="text-7xl md:text-[12rem] font-black tracking-tighter accent-text tabular-nums leading-none">00:00:00</h1>
                            <p class="text-sm md:text-xl font-light opacity-40 tracking-[0.8em] uppercase mt-4">Operational Status: Peak</p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 w-full max-w-4xl">
                            <div class="glass p-8 rounded-[2rem] text-left group hover:border-indigo-500/30 transition-all">
                                <i data-lucide="brain" class="accent-text mb-4 w-8 h-8"></i>
                                <h3 class="text-lg font-bold mb-2">AI Insights</h3>
                                <p id="ai-quote" class="text-slate-400 italic font-light">"Precision is the difference between a student and a master."</p>
                                <button onclick="fetchAIQuote()" class="mt-6 text-xs font-bold accent-text hover:tracking-widest transition-all uppercase">Request Analysis →</button>
                            </div>
                            <div class="glass p-8 rounded-[2rem] text-left flex flex-col justify-between">
                                <div>
                                    <h3 class="text-xs font-bold opacity-40 uppercase tracking-widest mb-4">Quick Stats</h3>
                                    <div class="flex items-end gap-2">
                                        <span class="text-4xl font-bold">${state.tasks.filter(t => t.completed).length}</span>
                                        <span class="text-sm opacity-40 mb-1">Goals reached today</span>
                                    </div>
                                </div>
                                <div class="mt-4 h-1 w-full bg-white/5 rounded-full overflow-hidden">
                                    <div class="h-full accent-bg" style="width: ${state.tasks.length ? (state.tasks.filter(t=>t.completed).length/state.tasks.length)*100 : 0}%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            } else if (state.activeTab === 'focus') {
                container.innerHTML = `
                    <div class="max-w-4xl mx-auto flex flex-col md:flex-row gap-8 items-center justify-center min-h-[70vh]">
                        <!-- Pomodoro -->
                        <div class="glass p-10 rounded-[3rem] text-center flex-1 w-full">
                            <h2 class="text-xs font-bold opacity-40 uppercase tracking-widest mb-8">Execution Timer</h2>
                            <div class="relative inline-flex items-center justify-center mb-8">
                                <svg class="w-64 h-64 -rotate-90">
                                    <circle cx="128" cy="128" r="120" stroke="currentColor" stroke-width="4" fill="transparent" class="text-white/5" />
                                    <circle id="pomo-circle" cx="128" cy="128" r="120" stroke="currentColor" stroke-width="4" fill="transparent" 
                                        stroke-dasharray="754" stroke-dashoffset="${754 - (state.pomodoro.time/1500)*754}" class="accent-text transition-all duration-1000" />
                                </svg>
                                <span class="absolute text-5xl font-mono font-medium">${formatTime(state.pomodoro.time)}</span>
                            </div>
                            <div class="flex justify-center gap-4">
                                <button onclick="togglePomodoro()" class="w-16 h-16 rounded-2xl accent-bg flex items-center justify-center hover:scale-105 transition-all">
                                    <i data-lucide="${state.pomodoro.status === 'running' ? 'pause' : 'play'}" class="fill-current"></i>
                                </button>
                                <button onclick="resetPomodoro()" class="w-16 h-16 rounded-2xl bg-white/5 flex items-center justify-center hover:bg-white/10">
                                    <i data-lucide="rotate-ccw"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Stopwatch -->
                        <div class="glass p-10 rounded-[3rem] text-center flex-1 w-full">
                            <h2 class="text-xs font-bold opacity-40 uppercase tracking-widest mb-8">Infinite Stopwatch</h2>
                            <div class="text-6xl font-mono accent-text mb-12 tabular-nums">
                                ${formatMS(state.stopwatch.time)}
                            </div>
                            <div class="flex justify-center gap-4">
                                <button onclick="toggleStopwatch()" class="px-8 py-4 rounded-2xl accent-bg font-bold uppercase text-xs tracking-widest">
                                    ${state.stopwatch.status === 'running' ? 'Stop' : 'Start'}
                                </button>
                                <button onclick="lapStopwatch()" class="px-8 py-4 rounded-2xl bg-white/5 font-bold uppercase text-xs tracking-widest">Lap</button>
                            </div>
                            <div id="laps" class="mt-6 h-32 overflow-y-auto custom-scroll space-y-2">
                                ${state.stopwatch.laps.map((l, i) => `<div class="text-[10px] opacity-40">LAP ${i+1}: ${formatMS(l)}</div>`).reverse().join('')}
                            </div>
                        </div>
                    </div>
                `;
            } else if (state.activeTab === 'tasks') {
                container.innerHTML = `
                    <div class="max-w-3xl mx-auto">
                        <div class="flex justify-between items-end mb-12">
                            <div>
                                <h1 class="text-5xl font-extrabold tracking-tighter">Daily Missions</h1>
                                <p class="opacity-40 mt-2">Break down the complexity of Titan goals.</p>
                            </div>
                            <button onclick="clearCompleted()" class="text-[10px] font-bold opacity-40 hover:opacity-100 uppercase tracking-widest">Clear Finished</button>
                        </div>
                        
                        <div class="relative mb-8">
                            <input id="task-in" type="text" placeholder="Designate new mission..." 
                                class="w-full glass p-6 rounded-2xl outline-none focus:ring-2 ring-indigo-500/50 text-lg transition-all"
                                onkeypress="if(event.key==='Enter') addTask()">
                            <button onclick="addTask()" class="absolute right-3 top-3 w-12 h-12 accent-bg rounded-xl flex items-center justify-center hover:scale-95 transition-all">
                                <i data-lucide="plus"></i>
                            </button>
                        </div>

                        <div class="space-y-3">
                            ${state.tasks.map(t => `
                                <div class="glass p-5 rounded-2xl flex items-center justify-between group animate-in slide-in-from-left duration-300">
                                    <div class="flex items-center gap-4">
                                        <button onclick="toggleTask(${t.id})" class="w-6 h-6 rounded-lg border-2 border-white/10 flex items-center justify-center ${t.completed ? 'accent-bg border-transparent' : ''}">
                                            ${t.completed ? '<i data-lucide="check" class="w-4 h-4 text-white"></i>' : ''}
                                        </button>
                                        <span class="${t.completed ? 'line-through opacity-30' : 'font-medium'}">${t.text}</span>
                                    </div>
                                    <div class="flex items-center gap-3">
                                        <button onclick="breakdownAI(${t.id})" class="text-[9px] font-black accent-text bg-white/5 px-3 py-2 rounded-lg hover:bg-white/10 opacity-0 group-hover:opacity-100 transition-all uppercase">Breakdown</button>
                                        <button onclick="deleteTask(${t.id})" class="p-2 text-rose-500 opacity-0 group-hover:opacity-100 transition-all">
                                            <i data-lucide="trash-2" class="w-4 h-4"></i>
                                        </button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            } else if (state.activeTab === 'lab') {
                container.innerHTML = `
                    <div class="max-w-5xl mx-auto h-full flex flex-col">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                            <div class="md:col-span-1 glass p-8 rounded-[2rem] flex flex-col gap-4">
                                <h3 class="text-xs font-bold opacity-40 uppercase tracking-widest mb-4">Physical Constants</h3>
                                ${Object.entries(physConsts).map(([sym, val]) => `
                                    <button onclick="calcNum('${val}')" class="flex justify-between p-4 rounded-xl bg-white/5 hover:bg-white/10 transition-all text-left">
                                        <span class="font-mono accent-text font-bold">${sym}</span>
                                        <span class="text-[10px] opacity-40 truncate ml-4">${val}</span>
                                    </button>
                                `).join('')}
                            </div>
                            <div class="md:col-span-2 glass p-10 rounded-[3rem]">
                                <div class="text-right mb-8">
                                    <div id="calc-eq" class="text-sm font-mono opacity-30 h-6"></div>
                                    <div id="calc-display" class="text-6xl font-light tracking-tighter tabular-nums overflow-hidden">0</div>
                                </div>
                                <div class="grid grid-cols-4 gap-4">
                                    <button onclick="calcClear()" class="h-16 rounded-2xl bg-rose-500/10 text-rose-500 font-bold">AC</button>
                                    <button onclick="calcFunc('sqrt')" class="h-16 rounded-2xl bg-white/5 font-mono">√</button>
                                    <button onclick="calcFunc('pow')" class="h-16 rounded-2xl bg-white/5 font-mono">^2</button>
                                    <button onclick="calcOp('/')" class="h-16 rounded-2xl bg-white/5 accent-text font-bold">/</button>
                                    
                                    ${['7','8','9','*','4','5','6','-','1','2','3','+'].map(key => `
                                        <button onclick="${['+','-','*','/'].includes(key) ? `calcOp('${key}')` : `calcNum('${key}')`}" 
                                            class="h-16 rounded-2xl bg-white/5 font-medium hover:bg-white/10 transition-all ${['+','-','*','/'].includes(key) ? 'accent-text font-bold' : ''}">
                                            ${key}
                                        </button>
                                    `).join('')}
                                    
                                    <button onclick="calcNum('0')" class="h-16 rounded-2xl bg-white/5 font-medium">0</button>
                                    <button onclick="calcNum('.')" class="h-16 rounded-2xl bg-white/5 font-medium">.</button>
                                    <button onclick="calcSolve()" class="col-span-2 h-16 rounded-2xl accent-bg text-white font-bold text-xl">=</button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
            lucide.createIcons();
        }

        // --- Helper Functions ---
        function formatTime(s) {
            const m = Math.floor(s / 60);
            const rs = s % 60;
            return `${String(m).padStart(2, '0')}:${String(rs).padStart(2, '0')}`;
        }

        function formatMS(ms) {
            const h = Math.floor(ms / 3600000);
            const m = Math.floor((ms % 3600000) / 60000);
            const s = Math.floor((ms % 60000) / 1000);
            const mm = Math.floor((ms % 1000) / 10);
            return `${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}.${String(mm).padStart(2, '0')}`;
        }

        // --- Feature Logic ---
        
        // 1. Tasks
        function addTask() {
            const input = document.getElementById('task-in');
            if (!input.value.trim()) return;
            state.tasks.unshift({ id: Date.now(), text: input.value, completed: false });
            input.value = '';
            save();
            render();
        }

        function toggleTask(id) {
            state.tasks = state.tasks.map(t => t.id === id ? {...t, completed: !t.completed} : t);
            save();
            render();
        }

        function deleteTask(id) {
            state.tasks = state.tasks.filter(t => t.id !== id);
            save();
            render();
        }

        function clearCompleted() {
            state.tasks = state.tasks.filter(t => !t.completed);
            save();
            render();
        }

        function save() {
            localStorage.setItem('lakshx-tasks', JSON.stringify(state.tasks));
        }

        // 2. Pomodoro
        function togglePomodoro() {
            if (state.pomodoro.interval) {
                clearInterval(state.pomodoro.interval);
                state.pomodoro.interval = null;
                state.pomodoro.status = 'idle';
            } else {
                state.pomodoro.status = 'running';
                state.pomodoro.interval = setInterval(() => {
                    state.pomodoro.time--;
                    if (state.pomodoro.time <= 0) {
                        clearInterval(state.pomodoro.interval);
                        alert("Session Complete, Titan.");
                    }
                    render();
                }, 1000);
            }
            render();
        }

        function resetPomodoro() {
            clearInterval(state.pomodoro.interval);
            state.pomodoro.time = 1500;
            state.pomodoro.status = 'idle';
            render();
        }

        // 3. Stopwatch
        function toggleStopwatch() {
            if (state.stopwatch.interval) {
                clearInterval(state.stopwatch.interval);
                state.stopwatch.interval = null;
                state.stopwatch.status = 'idle';
            } else {
                state.stopwatch.status = 'running';
                let startTime = Date.now() - state.stopwatch.time;
                state.stopwatch.interval = setInterval(() => {
                    state.stopwatch.time = Date.now() - startTime;
                    render();
                }, 40);
            }
            render();
        }

        function lapStopwatch() {
            if (state.stopwatch.time > 0) {
                state.stopwatch.laps.push(state.stopwatch.time);
                render();
            }
        }

        // 4. Calculator
        let calcVal = '0', calcEq = '';
        const physConsts = { "Light Speed (c)": "299792458", "Gravity (g)": "9.80665", "Planck (h)": "6.626e-34", "G-Const": "6.674e-11" };
        
        function calcNum(n) { calcVal = (calcVal === '0') ? n : calcVal + n; updateCalc(); }
        function calcOp(op) { calcEq = calcVal + ' ' + op + ' '; calcVal = '0'; updateCalc(); }
        function calcClear() { calcVal = '0'; calcEq = ''; updateCalc(); }
        function calcSolve() {
            try { calcVal = String(eval(calcEq + calcVal)); calcEq = ''; } catch { calcVal = 'Error'; }
            updateCalc();
        }
        function calcFunc(f) {
            if (f === 'sqrt') calcVal = String(Math.sqrt(parseFloat(calcVal)));
            if (f === 'pow') calcVal = String(Math.pow(parseFloat(calcVal), 2));
            updateCalc();
        }
        function updateCalc() {
            document.getElementById('calc-display').innerText = calcVal;
            document.getElementById('calc-eq').innerText = calcEq;
        }

        // 5. AI Sim
        async function fetchAIQuote() {
            const btn = document.querySelector('button[onclick="fetchAIQuote()"]');
            btn.innerText = "ANALYZING...";
            // Placeholder for API - simulates a thought process
            setTimeout(() => {
                const quotes = [
                    "Entropy always increases, but your focus shouldn't.",
                    "The laws of physics are the only rules you can't break. Master them.",
                    "Your potential energy is useless without kinetic action.",
                    "Calculate the path, then walk it with absolute certainty."
                ];
                document.getElementById('ai-quote').innerText = `"${quotes[Math.floor(Math.random()*quotes.length)]}"`;
                btn.innerText = "Request Analysis →";
            }, 800);
        }

        async function breakdownAI(id) {
            const task = state.tasks.find(t => t.id === id);
            alert(`AI Suggestion for: ${task.text}\n1. Research fundamentals\n2. Execute first draft\n3. Optimize performance.`);
        }

        // 6. Audio
        function toggleAmbient() {
            const btn = document.getElementById('ambient-btn');
            if (!state.ambient) {
                state.audio = new (window.AudioContext || window.webkitAudioContext)();
                const bufferSize = 2 * state.audio.sampleRate;
                const noiseBuffer = state.audio.createBuffer(1, bufferSize, state.audio.sampleRate);
                const output = noiseBuffer.getChannelData(0);
                for (let i = 0; i < bufferSize; i++) output[i] = Math.random() * 2 - 1;
                const whiteNoise = state.audio.createBufferSource();
                whiteNoise.buffer = noiseBuffer;
                whiteNoise.loop = true;
                const filter = state.audio.createBiquadFilter();
                filter.type = 'lowpass';
                filter.frequency.setValueAtTime(400, state.audio.currentTime);
                const gain = state.audio.createGain();
                gain.gain.setValueAtTime(0.02, state.audio.currentTime);
                whiteNoise.connect(filter);
                filter.connect(gain);
                gain.connect(state.audio.destination);
                whiteNoise.start();
                state.ambient = true;
                btn.classList.add('accent-text');
            } else {
                state.audio.close();
                state.ambient = false;
                btn.classList.remove('accent-text');
            }
        }

        // --- Initialize ---
        window.onload = () => {
            render();
            updateGlobalClock();
        };
    </script>
</body>
</html>
